<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Sportiva</title>
    
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        .checkout-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 48px;
            position: relative;
        }

        .checkout-steps::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--color-gray-border);
            z-index: 0;
        }

        .step {
            flex: 1;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--color-white);
            border: 2px solid var(--color-gray-border);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
            font-weight: 700;
            transition: all 300ms;
        }

        .step.active .step-circle {
            background-color: var(--color-black);
            color: var(--color-white);
            border-color: var(--color-black);
        }

        .step.completed .step-circle {
            background-color: var(--color-success);
            color: var(--color-white);
            border-color: var(--color-success);
        }

        .step-label {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--color-gray-medium);
        }

        .step.active .step-label {
            color: var(--color-black);
        }

        .checkout-section {
            display: none;
        }

        .checkout-section.active {
            display: block;
        }

        .metodo-pago {
            border: 2px solid var(--color-gray-border);
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 200ms;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .metodo-pago:hover {
            border-color: var(--color-black);
        }

        .metodo-pago.selected {
            border-color: var(--color-black);
            background-color: var(--color-gray-light);
        }

        .resumen-pedido {
            background-color: var(--color-gray-light);
            padding: 24px;
            position: sticky;
            top: 100px;
        }

        .producto-resumen {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--color-gray-border);
        }

        .producto-resumen img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            background-color: white;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        @media (max-width: 767px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    
    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-logo">SPORTIVA</a>
            
            <ul class="navbar-menu">
                <li><a href="catalogo.html?categoria=Ropa Deportiva" class="navbar-link">Ropa</a></li>
                <li><a href="catalogo.html?categoria=Implementos de Entrenamiento" class="navbar-link">Implementos</a></li>
                <li><a href="catalogo.html?categoria=Deportes de Equipo" class="navbar-link">Deportes</a></li>
                <li><a href="catalogo.html?categoria=Calzado Deportivo" class="navbar-link">Calzado</a></li>
                <li><a href="catalogo.html?categoria=Accesorios" class="navbar-link">Accesorios</a></li>
            </ul>
            
            <div class="navbar-actions">
                <button onclick="window.location.href='catalogo.html'" class="navbar-link">Buscar</button>
                <button class="cart-button" onclick="window.location.href='carrito.html'">
                    üõí
                    <span class="cart-count">0</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- CHECKOUT -->
    <section class="section">
        <div class="container">
            <h1 style="text-align: center; margin-bottom: 48px;">FINALIZAR COMPRA</h1>

            <!-- PASOS -->
            <div class="checkout-steps">
                <div class="step active" data-step="1">
                    <div class="step-circle">1</div>
                    <div class="step-label">Datos de Env√≠o</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-label">M√©todo de Pago</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-label">Confirmaci√≥n</div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 400px; gap: 48px;">
                
                <!-- FORMULARIO -->
                <div>
                    <!-- PASO 1: DATOS DE ENV√çO -->
                    <div id="paso1" class="checkout-section active">
                        <h2 style="margin-bottom: 24px;">Datos de Env√≠o</h2>

                        <form id="formDatosEnvio">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Nombre *</label>
                                    <input type="text" name="nombre" class="form-input" required>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Apellido *</label>
                                    <input type="text" name="apellido" class="form-input" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Email *</label>
                                    <input type="email" name="email" class="form-input" required>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Tel√©fono *</label>
                                    <input type="tel" name="telefono" class="form-input" placeholder="987654321" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">DNI *</label>
                                <input type="text" name="dni" class="form-input" placeholder="12345678" maxlength="8" required>
                            </div>

                            <h3 style="margin: 32px 0 16px;">Direcci√≥n de Entrega</h3>

                            <div class="form-group">
                                <label class="form-label">Direcci√≥n *</label>
                                <input type="text" name="direccion" class="form-input" placeholder="Av. Los √Ålamos 456" required>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Distrito *</label>
                                    <input type="text" name="distrito" class="form-input" placeholder="San Isidro" required>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Provincia *</label>
                                    <select name="provincia" class="form-select" required>
                                        <option value="Lima">Lima</option>
                                        <option value="Callao">Callao</option>
                                        <option value="Arequipa">Arequipa</option>
                                        <option value="Cusco">Cusco</option>
                                        <option value="Trujillo">Trujillo</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Referencia (Opcional)</label>
                                <textarea name="referencia" class="form-input" rows="3" placeholder="Ej: Edificio azul, tercer piso"></textarea>
                            </div>

                            <button type="button" class="btn btn-primary btn-full" onclick="irPaso2()">
                                Continuar al Pago ‚Üí
                            </button>
                        </form>
                    </div>

                    <!-- PASO 2: M√âTODO DE PAGO -->
                    <div id="paso2" class="checkout-section">
                        <h2 style="margin-bottom: 24px;">M√©todo de Pago</h2>

                        <div id="metodosPago">
                            <div class="metodo-pago" onclick="seleccionarMetodoPago('Tarjeta_Credito')">
                                <input type="radio" name="metodo_pago" value="Tarjeta_Credito">
                                <div>
                                    <strong>Tarjeta de Cr√©dito</strong>
                                    <p class="text-small text-secondary">Visa, Mastercard</p>
                                </div>
                            </div>

                            <div class="metodo-pago" onclick="seleccionarMetodoPago('Tarjeta_Debito')">
                                <input type="radio" name="metodo_pago" value="Tarjeta_Debito">
                                <div>
                                    <strong>Tarjeta de D√©bito</strong>
                                    <p class="text-small text-secondary">Visa, Mastercard</p>
                                </div>
                            </div>

                            <div class="metodo-pago" onclick="seleccionarMetodoPago('Yape')">
                                <input type="radio" name="metodo_pago" value="Yape">
                                <div>
                                    <strong>Yape</strong>
                                    <p class="text-small text-secondary">Pago instant√°neo</p>
                                </div>
                            </div>

                            <div class="metodo-pago" onclick="seleccionarMetodoPago('Plin')">
                                <input type="radio" name="metodo_pago" value="Plin">
                                <div>
                                    <strong>Plin</strong>
                                    <p class="text-small text-secondary">Pago instant√°neo</p>
                                </div>
                            </div>

                            <div class="metodo-pago" onclick="seleccionarMetodoPago('Transferencia')">
                                <input type="radio" name="metodo_pago" value="Transferencia">
                                <div>
                                    <strong>Transferencia Bancaria</strong>
                                    <p class="text-small text-secondary">Confirmaci√≥n en 24h</p>
                                </div>
                            </div>
                        </div>

                        <!-- FORMULARIO TARJETA (Se muestra si selecciona tarjeta) -->
                        <div id="formularioTarjeta" class="hidden" style="margin-top: 24px; padding: 24px; background-color: var(--color-gray-light);">
                            <h3 style="margin-bottom: 16px;">Datos de la Tarjeta</h3>
                            <form id="formTarjeta">
                                <div class="form-group">
                                    <label class="form-label">N√∫mero de Tarjeta</label>
                                    <input type="text" class="form-input" placeholder="1234 5678 9012 3456" maxlength="19">
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Vencimiento</label>
                                        <input type="text" class="form-input" placeholder="MM/AA" maxlength="5">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">CVV</label>
                                        <input type="text" class="form-input" placeholder="123" maxlength="3">
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div style="display: flex; gap: 16px; margin-top: 24px;">
                            <button class="btn btn-outline" style="flex: 1;" onclick="irPaso1()">
                                ‚Üê Volver
                            </button>
                            <button class="btn btn-primary" style="flex: 2;" onclick="irPaso3()">
                                Revisar Pedido ‚Üí
                            </button>
                        </div>
                    </div>

                    <!-- PASO 3: CONFIRMACI√ìN -->
                    <div id="paso3" class="checkout-section">
                        <h2 style="margin-bottom: 24px;">Confirmar Pedido</h2>

                        <div style="background-color: var(--color-gray-light); padding: 24px; margin-bottom: 24px;">
                            <h3 class="text-uppercase" style="margin-bottom: 16px; font-size: 14px;">Datos de Env√≠o</h3>
                            <div id="resumenDatosEnvio" style="line-height: 1.8;">
                                <!-- Cargado din√°micamente -->
                            </div>
                        </div>

                        <div style="background-color: var(--color-gray-light); padding: 24px; margin-bottom: 24px;">
                            <h3 class="text-uppercase" style="margin-bottom: 16px; font-size: 14px;">M√©todo de Pago</h3>
                            <div id="resumenMetodoPago">
                                <!-- Cargado din√°micamente -->
                            </div>
                        </div>

                        <div style="padding: 16px; background-color: #FFF9E6; border-left: 4px solid var(--color-warning); margin-bottom: 24px;">
                            <p class="text-small"><strong>Importante:</strong> Al confirmar tu pedido, aceptas nuestros t√©rminos y condiciones de venta.</p>
                        </div>

                        <div style="display: flex; gap: 16px;">
                            <button class="btn btn-outline" style="flex: 1;" onclick="irPaso2()">
                                ‚Üê Volver
                            </button>
                            <button class="btn btn-cta" style="flex: 2;" onclick="procesarPedido()">
                                Confirmar y Pagar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- RESUMEN DEL PEDIDO -->
                <div class="resumen-pedido">
                    <h3 class="text-uppercase" style="margin-bottom: 24px;">Resumen del Pedido</h3>

                    <div id="productosResumen" style="margin-bottom: 24px;">
                        <!-- Productos cargados din√°micamente -->
                    </div>

                    <div style="border-top: 1px solid var(--color-gray-border); padding-top: 16px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px;">
                            <span class="text-secondary">Subtotal</span>
                            <span id="checkoutSubtotal">S/ 0.00</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px;">
                            <span class="text-secondary">IGV (18%)</span>
                            <span id="checkoutIGV">S/ 0.00</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px;">
                            <span class="text-secondary">Env√≠o</span>
                            <span id="checkoutEnvio">S/ 15.00</span>
                        </div>

                        <div id="checkoutDescuento" class="hidden" style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; color: var(--color-success);">
                            <span>Descuento</span>
                            <span id="checkoutDescuentoMonto">- S/ 0.00</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; font-size: 18px; font-weight: 700; padding-top: 16px; border-top: 2px solid var(--color-black); margin-top: 16px;">
                            <span>Total</span>
                            <span id="checkoutTotal">S/ 0.00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <h4 class="footer-title">Productos</h4>
                    <ul class="footer-links">
                        <li><a href="catalogo.html?categoria=Calzado Deportivo" class="footer-link">Calzado</a></li>
                        <li><a href="catalogo.html?categoria=Ropa Deportiva" class="footer-link">Ropa</a></li>
                        <li><a href="catalogo.html?categoria=Accesorios" class="footer-link">Accesorios</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="footer-title">Deportes</h4>
                    <ul class="footer-links">
                        <li><a href="catalogo.html" class="footer-link">Running</a></li>
                        <li><a href="catalogo.html" class="footer-link">F√∫tbol</a></li>
                        <li><a href="catalogo.html" class="footer-link">Training</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="footer-title">Soporte</h4>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">Ayuda</a></li>
                        <li><a href="#" class="footer-link">Devoluciones</a></li>
                        <li><a href="#" class="footer-link">Contacto</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="footer-title">Empresa</h4>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">Nosotros</a></li>
                        <li><a href="#" class="footer-link">Tiendas</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="footer-copyright">&copy; 2025 Sportiva Per√∫. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/checkout.js"></script>
</body>
</html>
